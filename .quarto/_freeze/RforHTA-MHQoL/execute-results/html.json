{
  "hash": "9ae3783a587019b33c393f44531fc8ed",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Measuring Mental Health Quality of Life in R: A Psychometric Evaluation and Standardised MHQoL Toolbox\"\ntitle-slide-attributes:\n  data-background-size: \"cover\"\n  data-background-opacity: \"0.5\"\nsubtitle: |\n  <div class=\"subtitle-container\">\n  <img src=\"data/Stijn.jpg\" alt=\"Stijn Image\" class=\"subtitle-image\">\n  <div class=\"subtitle-text\">\n    <p>Erasmus School of Health, Policy & Management (ESHPM)</p>\n    <p><i class=\"fas fa-envelope\"></i> <strong>Email:</strong> s.b.peeters@eshpm.eur.nl</p>\n    <p><i class=\"fas fa-phone\"></i> <strong>Phone:</strong>+316-34404346</p>\n  </div>\nformat: \n revealjs:\n  logo: \"data/eshpm-logo.jpg\"\n  scrollable: true\n  highlight-style: github\n  slide-number: true \n  incremental: true\n  transition: fade \n  chalkboard: true\n  center: true\neditor: visual\ncss: styles.css\n---\n\n\n## 🧠 Why Standardised Scoring and Psychometric Evaluation Matter\n\n-   ✅ Validated health instruments (like **MHQoL**) are essential in health research\n-   ❌ Manual scoring is **error-prone** and inefficient\n-   Psychometric evaluation ensures:\n    -   Internal consistency\n    -   Validity (construct & convergent)\n-   ⚙️ R enables:\n    -   **Automated scoring**\n    -   **Reproducible evaluation**\n\n## 📦 What this Project Delivers\n\n-   📊 **Psychometric analysis workflow** in R\n-   Custom **R package** for:\n    -   MHQoL score recalculation\n    -   Consistent scoring logic\n-   🌐 Interactive **Shiny App** for:\n    -   User-friendly input\n    -   Automated results & visualisation\n-   🔁 Fully reproducible pipeline\n\n## ♻️ Integrated Workflow: From Data to Results\n\n1.  📄 **Collect MHQoL Responses**\n2.  ⚙️ **Recalculate Scores Using R Package or Shiny App**\n3.  🖥️ **Use Shiny App for Visual Summary**\n4.  📈 **Run Psychometric Analysis in R**\n5.  📝 **Interpret and Report Results**\n\n## ⚙️ Recalculate Scores Using R Package or Shiny App\n\n::: columns\n::: {.column width=\"50%\"}\n📦 R Package\n\n<iframe src=\"https://cran.r-project.org/web/packages/MHQoL/MHQoL.pdf\" width=\"100%\" height=\"600px\" style=\"border:none;\">\n\n</iframe>\n:::\n\n::: {.column width=\"50%\"}\n💻 Shiny interface\n\n<iframe src=\"https://stijnbpeeters.shinyapps.io/MHQoL-Tool/\" width=\"100%\" height=\"600px\" style=\"border:none;\">\n\n</iframe>\n:::\n:::\n\n## ⚙️ Recalculate Scores Using the MHQoL Package\n\n-   🗂️ Contains 8 function, **highlight two**:\n    -   `mhqol()`\n    -   `mhqol_LSS()`\n-   📑 One dataframe:\n    -   `mhqol_valueset()`\n-   🖥️ Shiny Tool is integrated in the package\n    -   `shiny_mhqol()`\n\n## ⚙️\n\n\n::: {.cell}\n\n:::\n\n\n::: columns\n::: {.column width=\"50%\"}\n### 🧮 Input in Scores\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 5px; \"><table class=\"table table-striped table-hover\" style=\"font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> ID </th>\n   <th style=\"text-align:left;\"> Group </th>\n   <th style=\"text-align:right;\"> SI </th>\n   <th style=\"text-align:right;\"> IN </th>\n   <th style=\"text-align:right;\"> MO </th>\n   <th style=\"text-align:right;\"> RE </th>\n   <th style=\"text-align:right;\"> DA </th>\n   <th style=\"text-align:right;\"> PH </th>\n   <th style=\"text-align:right;\"> FU </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Group B </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Group A </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Group A </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> Group B </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> Group B </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> Group B </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n### 📝 Input in Text\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 5px; \"><table class=\"table table-striped table-hover\" style=\"font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> ID </th>\n   <th style=\"text-align:left;\"> Group </th>\n   <th style=\"text-align:left;\"> SI </th>\n   <th style=\"text-align:left;\"> IN </th>\n   <th style=\"text-align:left;\"> MO </th>\n   <th style=\"text-align:left;\"> RE </th>\n   <th style=\"text-align:left;\"> DA </th>\n   <th style=\"text-align:left;\"> PH </th>\n   <th style=\"text-align:left;\"> FU </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Group B </td>\n   <td style=\"text-align:left;\"> I think positively about myself </td>\n   <td style=\"text-align:left;\"> I am dissatisfied with my level of independence </td>\n   <td style=\"text-align:left;\"> I feel a little anxious, gloomy, or depressed </td>\n   <td style=\"text-align:left;\"> I am very dissatisfied with my relationships </td>\n   <td style=\"text-align:left;\"> I am dissatisfied with my daily activities </td>\n   <td style=\"text-align:left;\"> I have no physical health problems </td>\n   <td style=\"text-align:left;\"> I am very optimistic about my future </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Group B </td>\n   <td style=\"text-align:left;\"> I think positively about myself </td>\n   <td style=\"text-align:left;\"> I am very dissatisfied with my level of independence </td>\n   <td style=\"text-align:left;\"> I feel anxious, gloomy, or depressed </td>\n   <td style=\"text-align:left;\"> I am satisfied with my relationships </td>\n   <td style=\"text-align:left;\"> I am satisfied with my daily activities </td>\n   <td style=\"text-align:left;\"> I have a great many physical health problems </td>\n   <td style=\"text-align:left;\"> I am optimistic about my future </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Group A </td>\n   <td style=\"text-align:left;\"> I think very negatively about myself </td>\n   <td style=\"text-align:left;\"> I am very dissatisfied with my level of independence </td>\n   <td style=\"text-align:left;\"> I feel very anxious, gloomy, or depressed </td>\n   <td style=\"text-align:left;\"> I am very satisfied with my relationships </td>\n   <td style=\"text-align:left;\"> I am dissatisfied with my daily activities </td>\n   <td style=\"text-align:left;\"> I have some physical health problems </td>\n   <td style=\"text-align:left;\"> I am very optimistic about my future </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> Group B </td>\n   <td style=\"text-align:left;\"> I think very positively about myself </td>\n   <td style=\"text-align:left;\"> I am very satisfied with my level of independence </td>\n   <td style=\"text-align:left;\"> I feel anxious, gloomy, or depressed </td>\n   <td style=\"text-align:left;\"> I am very satisfied with my relationships </td>\n   <td style=\"text-align:left;\"> I am satisfied with my daily activities </td>\n   <td style=\"text-align:left;\"> I have a great many physical health problems </td>\n   <td style=\"text-align:left;\"> I am optimistic about my future </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> Group B </td>\n   <td style=\"text-align:left;\"> I think positively about myself </td>\n   <td style=\"text-align:left;\"> I am very dissatisfied with my level of independence </td>\n   <td style=\"text-align:left;\"> I feel very anxious, gloomy, or depressed </td>\n   <td style=\"text-align:left;\"> I am very dissatisfied with my relationships </td>\n   <td style=\"text-align:left;\"> I am satisfied with my daily activities </td>\n   <td style=\"text-align:left;\"> I have many physical health problems </td>\n   <td style=\"text-align:left;\"> I am very gloomy about my future </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> Group B </td>\n   <td style=\"text-align:left;\"> I think very negatively about myself </td>\n   <td style=\"text-align:left;\"> I am dissatisfied with my level of independence </td>\n   <td style=\"text-align:left;\"> I feel anxious, gloomy, or depressed </td>\n   <td style=\"text-align:left;\"> I am dissatisfied with my relationships </td>\n   <td style=\"text-align:left;\"> I am dissatisfied with my daily activities </td>\n   <td style=\"text-align:left;\"> I have no physical health problems </td>\n   <td style=\"text-align:left;\"> I am optimistic about my future </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n:::\n:::\n\n## Which to use? 🤔\n\nBoth! 🥳\n\n## Example - Output in utilities?🤔\n\n::: columns\n::: {.column width=\"60%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(MHQoL)\n\n# Prepare input: 7 MHQoL dimensions\ndimensions <- example_data_scores[, c(\"SI\", \"IN\", \"MO\", \"RE\", \"DA\", \"PH\", \"FU\")]\n\n# Calculate total utility score (Netherlands value set)\nmhqol_utility <- mhqol(\n  dimensions = dimensions,\n  country = \"Netherlands\",   # 🇳🇱 Default option\n  metric = \"total\",          # \"total\" or \"average\"\n  ignore_invalid = TRUE,     # Skip incomplete rows\n  ignore_NA = FALSE          # Stop if NAs are present\n)\n```\n:::\n\n:::\n\n::: {.column width=\"40%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover\" style=\"font-size: 18px; width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> SI_u </th>\n   <th style=\"text-align:right;\"> IN_u </th>\n   <th style=\"text-align:right;\"> MO_u </th>\n   <th style=\"text-align:right;\"> RE_u </th>\n   <th style=\"text-align:right;\"> DA_u </th>\n   <th style=\"text-align:right;\"> PH_u </th>\n   <th style=\"text-align:right;\"> FU_u </th>\n   <th style=\"text-align:right;\"> utility </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> -0.007 </td>\n   <td style=\"text-align:right;\"> -0.184 </td>\n   <td style=\"text-align:right;\"> -0.063 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> -0.021 </td>\n   <td style=\"text-align:right;\"> -0.243 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.482 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> -0.137 </td>\n   <td style=\"text-align:right;\"> -0.018 </td>\n   <td style=\"text-align:right;\"> -0.311 </td>\n   <td style=\"text-align:right;\"> -0.015 </td>\n   <td style=\"text-align:right;\"> -0.140 </td>\n   <td style=\"text-align:right;\"> -0.383 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> -0.004 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> -0.007 </td>\n   <td style=\"text-align:right;\"> -0.018 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> -0.383 </td>\n   <td style=\"text-align:right;\"> -0.17 </td>\n   <td style=\"text-align:right;\"> 0.422 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> -0.184 </td>\n   <td style=\"text-align:right;\"> -0.311 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> -0.213 </td>\n   <td style=\"text-align:right;\"> -0.243 </td>\n   <td style=\"text-align:right;\"> -0.17 </td>\n   <td style=\"text-align:right;\"> -0.121 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> -0.007 </td>\n   <td style=\"text-align:right;\"> -0.018 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> -0.269 </td>\n   <td style=\"text-align:right;\"> -0.140 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.566 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> -0.118 </td>\n   <td style=\"text-align:right;\"> -0.179 </td>\n   <td style=\"text-align:right;\"> -0.172 </td>\n   <td style=\"text-align:right;\"> -0.021 </td>\n   <td style=\"text-align:right;\"> -0.064 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.446 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n:::\n:::\n\n## Example - Output in scores?🤔\n\n::: columns\n::: {.column width=\"60%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(MHQoL)\n\n# Prepare input: 7 MHQoL dimensions\ndimensions <- example_data_text[, c(\"SI\", \"IN\", \"MO\", \"RE\", \"DA\", \"PH\", \"FU\")] #Input from the text dataframe\n\n# Calculate total utility score (Netherlands value set)\nmhqol_LSS <- mhqol_LSS(\n  dimensions = dimensions,\n  metric = \"total\",          # \"total\" or \"average\"\n  ignore_invalid = TRUE,     # Skip incomplete rows\n  ignore_NA = FALSE          # Stop if NAs are present\n)\n```\n:::\n\n:::\n\n::: {.column width=\"40%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover\" style=\"font-size: 18px; width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> SI_s </th>\n   <th style=\"text-align:right;\"> IN_s </th>\n   <th style=\"text-align:right;\"> MO_s </th>\n   <th style=\"text-align:right;\"> RE_s </th>\n   <th style=\"text-align:right;\"> DA_s </th>\n   <th style=\"text-align:right;\"> PH_s </th>\n   <th style=\"text-align:right;\"> FU_s </th>\n   <th style=\"text-align:right;\"> LSS </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 12 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 14 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 9 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n:::\n:::\n\n## Or if you want to have use an Interface (from Shiny): the MHQoL cooker👩‍🍳\n\n<iframe src=\"https://stijnbpeeters.shinyapps.io/MHQoL-Tool/\" width=\"100%\" height=\"600px\" style=\"border:none;\">\n\n</iframe>\n\n::: :::\n\n## 📈 The actual work starts: run the Psychometric Analysis in R\n\n::: columns\n::: {.column width=\"65%\"}\n1.  **Internal Consistency**\n    -   Cronbach’s Alpha\n2.  **Construct Validity**\n    -   Measurement invariance test\n    -   Spearman’s Rank Correlation Coefficients\n    -   Multilevel Regression Analyses\n3.  **Convergent Validity**\n    -   Spearman’s Rank Correlation Coefficients\n:::\n\n::: {.column width=\"35%\"}\n![](https://preview.redd.it/starting-a-new-hobby-v0-2dnsyjxmd3qa1.png?width=640&crop=smart&auto=webp&s=bbd84f2849b718c8901cdb628d9c47fa59ee892f)\n:::\n:::\n\n## Internal Consistency using the `ltm` package\n\n::: columns\n::: {.column width=\"40%\"}\n**⚙️ How We Used It**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ltm)\n\n# Select MHQoL dimensions (7 items)\ndimensions <- example_data_scores[, c(\"SI\", \"IN\", \"MO\", \"RE\", \"DA\", \"PH\", \"FU\")]\n\n# Compute Cronbach’s Alpha\ncronbach.alpha(dimensions)\n```\n:::\n\n:::\n\n::: {.column width=\"60%\"}\n**🧠 Why we used it?**\n\n-   Simple and **dedicated function** for Cronbach’s Alpha\n-   Integrated in a package already suited for **psychometric analysis**\n-   Output includes:\n    -   Overall alpha\n    -   **Item-total correlations**\n    -   Effect of removing each item\n-   Ideal for Likert-style or binary questionnaire items\n-   Lightweight and easy to interpret — perfect for streamlined reporting\n:::\n:::\n\n## 🔍 Measurement invariance - Why Test Measurement Invariance?\n\n::: columns\n::: {.column width=\"55%\"}\n\n\n**🧠 Purpose**\n\n-   Ensure **MHQoL measures the same construct** across groups\\\n-   Without it, **comparisons may be biased or invalid** \n\n**🔬 Invariance Levels**\n\n1.  **Configural**: Same structure\\\n2.  **Metric**: Equal loadings\\\n3.  **Scalar**: Equal loadings + intercepts\\\n4.  *(Optional)* **Residual**: Equal residual variances\n:::\n\n::: {.column width=\"45%\"}\n![](https://okan.cloud/posts/2020-12-21-testing-for-measurement-invariance-in-r/mi2.jpg)\n:::\n:::\n\n-   Each step **adds constraints** and tests whether the model still fits well.\n\n## ✅ Sow we Tested it in R (lavaan)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lavaan)\n\n# Latent model: 1 factor with 7 observed MHQoL items\nmodel <- '\n  MHQoL =~ SI + IN + MO + RE + DA + PH + FU\n'\n\n# 1. Configural invariance\nfit_config <- cfa(model, data = df, group = \"group_var\",\n                  estimator = \"WLSMV\", ordered = TRUE)\n\n# 2. Metric invariance (equal loadings)\nfit_metric <- cfa(model, data = df, group = \"group_var\",\n                  estimator = \"WLSMV\", ordered = TRUE,\n                  group.equal = \"loadings\")\n\n# 3. Scalar invariance (equal loadings + intercepts)\nfit_scalar <- cfa(model, data = df, group = \"group_var\",\n                  estimator = \"WLSMV\", ordered = TRUE,\n                  group.equal = c(\"loadings\", \"intercepts\"))\n\n# Compare model fits\nanova(fit_config, fit_metric, fit_scalar)\n```\n:::\n\n\n## 📊 Comparing Invariance Models\n\n| Model          | CFI  | RMSEA | SRMR |\n|----------------|------|-------|------|\n| Configural     | 0.99 | 0.04  | 0.06 |\n| Metric         | 0.99 | 0.04  | 0.07 |\n| Scalar         | 0.96 | 0.10  | 0.07 |\n| Partial scalar | 0.99 | 0.03  | 0.06 |\n\nPartial scalar: free some intercepts, for example\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit_part_scalar <- cfa(model, data = df, group = \"group_var\",\n                  estimator = \"WLSMV\", ordered = TRUE,\n                  group.equal = c(\"loadings\", C(\"SI|T1\", \"IN|T2\")))\n```\n:::\n\n\n## 🔗 Spearman’s Rank Correlation Coefficients\n\n::: columns\n::: {.column width=\"55%\"}\n**🧠 Purpose**\n\n-   Assess **convergent validity** between MHQoL and related health measures\n-   **Spearman’s rank correlation** is:\n    -   Non-parametric\n    -   Based on **ranked values**\n    -   Ideal for **ordinal** or **non-normal** data\n:::\n\n::: {.column width=\"45%\"}\n-   ✅ In R, correlation methods are available with `cor.test()` (also for pearson)\n\n\n\n📌 Example Use Cases: MHQoL vs. EQ-5D\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Pearson\ncor.test(x = mhqol_score, y = eq5d_score, method = \"pearson\")\n\n# Spearman\ncor.test(x = mhqol_score, y = eq5d_score, method = \"spearman\")\n```\n:::\n\n:::\n:::\n\n## 📊 Example output correlations with MHQoL Score\n\n| Variable           | Spearman’s ρ | p-value  |\n|--------------------|--------------|----------|\n| EQ-5D LSS          | 0.62         | \\< 0.001 |\n| WHO-5 Wellbeing    | 0.58         | \\< 0.001 |\n| PHQ-9 (depression) | -0.55        | \\< 0.001 |\n\n## Last step👣: Multilevel regression\n\n::: columns\n::: {.column width=\"55%\"}\n**🌍 Data Structure**\n\n-   Individuals are **nested within countries**\\\n-   Ignoring this would violate **independence assumptions**\n\n\n\n**🎯 Research Questions**\n\n1.  Do MHQoL dimensions predict **self-reported mental QoL (MHQoL-VAS)?**\n2.  Do EQ-5D-5L dimensions explain **mental QoL differences**?\n\n**📐 Methodological Approach**\n\n-   Used **multilevel regression** to account for hierarchy\\\n\n\n:::\n\n::: {.column width=\"45%\"}\n\n-   Included:\n    -   Fixed effects for predictors\n    -   Covariates: **age** and **gender** (*sex assigned at birth*)\n\n**🧪 Compared two model types:**\n\n1.  **Random Intercept Model**\\\n    – Intercepts vary across countries\n\n2.  **Random Intercept + Slope Model**\\\n    – Both intercepts and slopes vary across countries\n\n\n\n-   **✅** Likelihood ratio test\\*\\* favored **random intercept only**\n:::\n:::\n\n## How it was done in R\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lme4)\n\n# Random intercept model: MHQoL dimensions → MHQoL-VAS\nmodel1 <- lmer(\n  mhqol_vas ~ SI + IN + MO + RE + DA + PH + FU +\n  age + gender + (1 | country),\n  data = example_data_scores\n)\n\n# Random intercept + slope model (example: FU varies by country)\nmodel2 <- lmer(\n  mhqol_vas ~ SI + IN + MO + RE + DA + PH + FU +\n  age + gender + (FU | country),\n  data = example_data_scores\n)\n\n# Compare models\nanova(model1, model2)\n\n# Model performance\nsummary(model1)\n```\n:::\n\n\n## ✅ Key Takeaways\n\n-   🧠 **R provides a complete psychometric workflow**, from internal consistency to measurement invariance and multilevel modeling\n\n-   📦 We used specialized packages:\n\n    -   `ltm` for **Cronbach’s Alpha**\n    -   `lavaan` for **Confirmatory Factor Analysis** and **Measurement Invariance**\n    -   `lme4` for **Multilevel Regression**\n\n-   🧰 We developed the **MHQoL R package** and **Shiny app**:\n\n    -   Standardized scoring\n    -   Enhances **reproducibility** and **ease of use**\n\n-   🎯 Together, these tools support both **rigorous evaluation** and **practical implementation** of mental health QoL measures\n\n## Any Questions?\n\n![](data/compiling.png)",
    "supporting": [
      "RforHTA-MHQoL_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"RforHTA-MHQoL_files/libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"RforHTA-MHQoL_files/libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}